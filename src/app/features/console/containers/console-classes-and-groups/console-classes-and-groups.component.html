<div>
  <div class="content sub-menu-list-tab">
    <h3 class="content__title">
      These are the Class and Groups set up in your School
    </h3>
    <p class="content__desc">Add, drag, drop and edit</p>
    <div
      class="badges"
      #badges
      (dragleave)="onBadgesDragLeave($event)"
      (dragover)="onBadgesDragOver($event)"
      (drop)="onBadgesDrop($event)"
    >
      <div
        class="badge badge--active"
        [ngClass]="{ 'badge--disabled': classItem.dragged }"
        [appDraggable]="{ data: classItem, notDraggable: classItem.dragged }"
        *ngFor="let classItem of assignedClasses$ | async"
      >
        <span>{{ classItem.grade }}</span>
      </div>
      <div class="badge badge--edit">
        <div class="signs">
          <span>+</span>
          <span>-</span>
        </div>
        <edu-popover
          class="multiselect-popover"
          (edu-close)="onCloseMultiSelect()"
          (edu-open)="openMultiSelect()"
        >
          <div class="badges badges--popover">
            <ng-container *ngFor="let classItem of localCopy">
              <div
                class="badge badge--small "
                [ngClass]="{ 'badge--active': classItem.selected }"
                (click)="toggleOption(classItem)"
              >
                <span>{{ classItem.grade }}</span>
              </div>
            </ng-container>
          </div>
          <edu-tick-button
            [ClosePopover]="multiselectPopoverState"
            (click)="eduTickClick()"
          ></edu-tick-button>
        </edu-popover>
      </div>
    </div>

    <div class="content__body scrollable">
      <div class="dropzones">
        <div
          class="dropzone"
          [ngClass]="{ 'dropzone__body--active': groupItem.draggedOver }"
          (dragover)="onDragEnter($event, groupItem)"
          (drop)="onDrop($event, groupItem)"
          (dragleave)="onDragLeave($event, groupItem)"
          *ngFor="let groupItem of groupsCopy"
        >
          <div class="dropzone__title-wrapper">
            <h5 class="dropzone__title">{{ groupItem.groupName }}</h5>
            <button ButtonType="icon" class="dropzone__delete-btn">
              <img src="assets/admin/buttons/delete.svg" />
              <edu-popover
                class="delete-popover"
                alignment="top"
                pointerAlignment="right"
              >
                <div
                  class="delete-popover__text"
                  [ClosePopover]="deletePopoverState"
                >
                  Are you sure you want to delete this group?
                </div>
                <div class="delete-popover__buttons">
                  <button
                    class="delete-popover__button delete-popover__button--cancel"
                    ButtonType="basic"
                    (click)="toggleDeletePopover()"
                  >
                    cancel
                  </button>
                  <button
                    class="delete-popover__button delete-popover__button--delete"
                    ButtonType="outline"
                    (click)="deleteGroupItem(groupItem)"
                  >
                    delete
                  </button>
                </div>
              </edu-popover>
            </button>
          </div>
          <div class="dropzone__body">
            <!-- (click)="toggleOption(classItem.grade)" -->
            <div
              *ngFor="let classItem of groupItem.classes"
              class="badge badge--small badge--active"
              [appDraggable]="{ data: classItem }"
            >
              <span>{{ classItem.grade }}</span>
            </div>
          </div>
        </div>
        <div class="dropzone dropzone--create" (click)="createGroup()">
          <span>+</span>
        </div>
      </div>
    </div>
  </div>
</div>
<edu-delete-classes-modal
  *ngIf="isOpen"
  (onCancel)="onCancel()"
  (onDelete)="onDelete()"
  [deletedClasses]="toBeDeleted"
></edu-delete-classes-modal>
